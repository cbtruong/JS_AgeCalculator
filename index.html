<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <div class="container">
            <div class="calculator">
                <h1>
                    JavaScript <br />
                    <span>Age Calculator</span>
                </h1>
                <div class="input-box">
                    <input
                        type="date"
                        id="date" 
                        />
                    <button onclick={calculateAge()}>Calculator</button>
                </div>
                <p id="result"></p>
            </div>
        </div>
        <script>
            let currentDate = new Date();
	        let date=currentDate.toISOString().split("T")[0];
            document.getElementById("date").setAttribute("max", currentDate.toISOString().split("T")[0]);
            console.log(date.split("-"));
            

            function calculateAge(){
                let y=parseInt(date.split("-")[0]);
                let m=parseInt(date.split("-")[1]);
                let d=parseInt(date.split("-")[2]);
                
                let birthDay=document.getElementById("date").value;
                console.log(birthDay);
                if(birthDay){
                let yy=parseInt(birthDay.split("-")[0]);
                let mm=parseInt(birthDay.split("-")[1]);
                let dd=parseInt(birthDay.split("-")[2])-1;

                let y1 = y - yy;
                let m1 = m - mm;
                let d1 = d - dd;
                

                if (d1 < 0) {
                    m1--;
                    d1 += new Date(y, mm, 0).getDate();
                }
                if (m1 < 0) {
                    y1--;
                    m1 += 12;
                }

                // hiển thị tuổi
                document.getElementById("result").innerText=(
                    "You are " + y1 + " years," + m1 + " months and " + d1 + " days old"
                );
            }
            else
            document.getElementById("result").innerText="Hãy chọn ngày sinh";
            }
        </script>
    </body>
</html>